<code><font color="#000000">
<font color="#0000BB">&lt;?php<br /></font><font color="#FF8000">/*<br />&nbsp;*&nbsp;$Id:&nbsp;xml_class.php,v&nbsp;0.35RC1&nbsp;2005/08/04&nbsp;22:38:27&nbsp;gigasoft&nbsp;Exp&nbsp;$<br />&nbsp;*&nbsp;XML&nbsp;class<br />&nbsp;*&nbsp;Copyright&nbsp;(C)&nbsp;2004&nbsp;Giovanni&nbsp;Piller&nbsp;Cottrer<br />&nbsp;*<br />&nbsp;*&nbsp;This&nbsp;program&nbsp;is&nbsp;free&nbsp;software;&nbsp;you&nbsp;can&nbsp;redistribute&nbsp;it&nbsp;and/or<br />&nbsp;*&nbsp;modify&nbsp;it&nbsp;under&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;GNU&nbsp;General&nbsp;Public&nbsp;License<br />&nbsp;*&nbsp;as&nbsp;published&nbsp;by&nbsp;the&nbsp;Free&nbsp;Software&nbsp;Foundation;&nbsp;either&nbsp;version&nbsp;2<br />&nbsp;*&nbsp;of&nbsp;the&nbsp;license,&nbsp;or&nbsp;any&nbsp;later&nbsp;version.<br />&nbsp;*<br />&nbsp;*&nbsp;This&nbsp;program&nbsp;is&nbsp;distributed&nbsp;in&nbsp;the&nbsp;hope&nbsp;that&nbsp;it&nbsp;will&nbsp;be&nbsp;useful,<br />&nbsp;*&nbsp;but&nbsp;WITHOUT&nbsp;ANY&nbsp;WARRANTY;&nbsp;without&nbsp;even&nbsp;the&nbsp;implied&nbsp;warranty&nbsp;of<br />&nbsp;*&nbsp;MERCHANTABILITY&nbsp;or&nbsp;FITNESS&nbsp;FOR&nbsp;A&nbsp;PARTICULAR&nbsp;PURPOSE.&nbsp;&nbsp;See&nbsp;the<br />&nbsp;*&nbsp;GNU&nbsp;General&nbsp;Public&nbsp;License&nbsp;for&nbsp;more&nbsp;details.<br />&nbsp;*<br />&nbsp;*&nbsp;You&nbsp;should&nbsp;have&nbsp;received&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;GNU&nbsp;General&nbsp;Public&nbsp;License<br />&nbsp;*&nbsp;along&nbsp;with&nbsp;this&nbsp;program;&nbsp;if&nbsp;not,&nbsp;write&nbsp;to&nbsp;the&nbsp;Free&nbsp;Software<br />&nbsp;*&nbsp;Foundation,&nbsp;inc.,&nbsp;59&nbsp;Temple&nbsp;Place&nbsp;-&nbsp;Suite&nbsp;330,&nbsp;Boston,&nbsp;MA&nbsp;&nbsp;02111-1307,&nbsp;USA<br />&nbsp;*/<br /><br />/**<br />&nbsp;*&nbsp;XML&nbsp;class<br />&nbsp;*<br />&nbsp;*&nbsp;This&nbsp;file&nbsp;contains&nbsp;a&nbsp;class&nbsp;to&nbsp;create/modify/manipulate&nbsp;XML&nbsp;files<br />&nbsp;*<br />&nbsp;*&nbsp;&lt;note&gt;<br />&nbsp;*&nbsp;If&nbsp;you&nbsp;want&nbsp;to&nbsp;support&nbsp;me,&nbsp;you&nbsp;can&nbsp;visit&nbsp;my&nbsp;site&nbsp;or&nbsp;make&nbsp;a&nbsp;donation&nbsp;(this<br />&nbsp;*&nbsp;feature&nbsp;will&nbsp;be&nbsp;aviable&nbsp;soon&nbsp;:D)<br />&nbsp;*&nbsp;<br />&nbsp;*&nbsp;Excuse&nbsp;me&nbsp;for&nbsp;bad&nbsp;English...<br />&nbsp;*<br />&nbsp;*&nbsp;http://gigasoft.altervista.org/<br />&nbsp;*&nbsp;&lt;/note&gt;<br />&nbsp;*<br />&nbsp;*&nbsp;&lt;to-do&gt;<br />&nbsp;*&nbsp;Those&nbsp;are&nbsp;the&nbsp;features&nbsp;that&nbsp;I&nbsp;will&nbsp;insert&nbsp;in&nbsp;this&nbsp;class.<br />&nbsp;*<br />&nbsp;*&nbsp;-&nbsp;Functions&nbsp;to&nbsp;create&nbsp;XML&nbsp;file/contents&nbsp;&nbsp;&nbsp;&lt;OK&gt;<br />&nbsp;*&nbsp;-&nbsp;Functions&nbsp;to&nbsp;read&nbsp;XML&nbsp;strings&nbsp;&nbsp;&nbsp;&lt;OK&gt;<br />&nbsp;*&nbsp;-&nbsp;Functions&nbsp;to&nbsp;check&nbsp;XML&nbsp;string&nbsp;&nbsp;&nbsp;&lt;VERY-PARTIAL&gt;<br />&nbsp;*&nbsp;-&nbsp;Functions&nbsp;to&nbsp;modify/delete&nbsp;XML&nbsp;&nbsp;&nbsp;&lt;NO&gt;<br />&nbsp;*&nbsp;-&nbsp;Function&nbsp;to&nbsp;Check&nbsp;XML&nbsp;syntax&nbsp;&nbsp;&nbsp;&lt;NO&gt;<br />&nbsp;*&nbsp;-&nbsp;Real&nbsp;indentation&nbsp;in&nbsp;XML&nbsp;strings&nbsp;&nbsp;&nbsp;&lt;OK&gt;<br />&nbsp;*&nbsp;-&nbsp;Functions&nbsp;to&nbsp;manage&nbsp;XML&nbsp;attributes&nbsp;&nbsp;&nbsp;&lt;NO&gt;<br />&nbsp;*&nbsp;-&nbsp;Functions&nbsp;to&nbsp;create&nbsp;dinamically&nbsp;RSS&nbsp;Feeds&nbsp;&nbsp;&nbsp;&lt;NO&gt;<br />&nbsp;*&nbsp;-&nbsp;Function&nbsp;to&nbsp;read&nbsp;remote&nbsp;and&nbsp;local&nbsp;RSS&nbsp;files&nbsp;as&nbsp;you&nbsp;want&nbsp;&nbsp;&nbsp;&lt;NO&gt;<br />&nbsp;*&nbsp;-&nbsp;Functions&nbsp;to&nbsp;transpose&nbsp;XML&nbsp;to&nbsp;Array&nbsp;and&nbsp;reverse&nbsp;process&nbsp;&nbsp;&nbsp;&lt;NO-REMOTE&gt;<br />&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;I&nbsp;have&nbsp;tested&nbsp;a&nbsp;simple&nbsp;method&nbsp;to&nbsp;do&nbsp;it&nbsp;but&nbsp;can&nbsp;do&nbsp;only&nbsp;one<br />&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transposition&nbsp;and&nbsp;the&nbsp;reverse&nbsp;process&nbsp;is&nbsp;more&nbsp;difficult&nbsp;to&nbsp;do.<br />&nbsp;*&nbsp;-&nbsp;Functions&nbsp;to&nbsp;set&nbsp;all&nbsp;the&nbsp;DTD&nbsp;that&nbsp;you&nbsp;need&nbsp;&nbsp;&nbsp;&lt;NO&gt;<br />&nbsp;*&nbsp;-&nbsp;Function&nbsp;to&nbsp;make&nbsp;all&nbsp;Beer&nbsp;that&nbsp;you&nbsp;need&nbsp;:D&nbsp;&nbsp;&nbsp;&lt;HOW-DO-THIS?&gt;<br />&nbsp;*&nbsp;<br />&nbsp;*&nbsp;I&nbsp;can't&nbsp;do&nbsp;all&nbsp;this&nbsp;things&nbsp;alone.&nbsp;Or&nbsp;I&nbsp;can,&nbsp;but&nbsp;very&nbsp;slowly.<br />&nbsp;*&nbsp;If&nbsp;you&nbsp;want&nbsp;you&nbsp;can&nbsp;support&nbsp;me...<br />&nbsp;*&nbsp;&lt;/to-do&gt;<br />&nbsp;*<br />&nbsp;*&nbsp;@package&nbsp;Xml<br />&nbsp;*<br />&nbsp;*&nbsp;@author&nbsp;Giovanni&nbsp;Piller&nbsp;Cottrer&nbsp;&lt;giovanni.piller@gmail.com&gt;<br />&nbsp;*&nbsp;@version&nbsp;0.30RC2<br />&nbsp;*&nbsp;@copyright&nbsp;Copyright&nbsp;(c)&nbsp;2003-2005<br />&nbsp;*&nbsp;@license&nbsp;http://opensource.org/licenses/gpl-license.php&nbsp;GNU&nbsp;General&nbsp;Public&nbsp;License<br />&nbsp;*/<br /><br /><br />/**<br />*&nbsp;provvisory&nbsp;include&nbsp;(only&nbsp;for&nbsp;the&nbsp;correct&nbsp;rewriting&nbsp;of&nbsp;some&nbsp;function&nbsp;picked&nbsp;up<br />*&nbsp;from&nbsp;flatnuke)<br />*<br />*&nbsp;@include&nbsp;flatnuke&nbsp;shared&nbsp;functions<br />*/<br />#include_once("shared.php");<br /><br /><br />/**<br />*&nbsp;Simple&nbsp;class&nbsp;to&nbsp;create/modify/delete&nbsp;XML<br />*<br />*&nbsp;@author&nbsp;Giovanni&nbsp;Piller&nbsp;Cottrer&nbsp;&lt;giovanni.piller@gmail.com&gt;<br />*/<br /></font><font color="#007700">class&nbsp;</font><font color="#0000BB">xml</font><font color="#007700">{<br /><br /></font><font color="#FF8000">/**<br />*&nbsp;use&nbsp;Debug&nbsp;system?<br />*<br />*&nbsp;@var&nbsp;bool<br />*&nbsp;@access&nbsp;public<br />*/<br /></font><font color="#007700">var&nbsp;</font><font color="#0000BB">$debug&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">true</font><font color="#007700">;<br /><br /></font><font color="#FF8000">/**<br />*&nbsp;can&nbsp;OverWrite?<br />*<br />*&nbsp;@var&nbsp;bool<br />*&nbsp;@access&nbsp;public<br />*/<br /></font><font color="#007700">var&nbsp;</font><font color="#0000BB">$overWrite&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br /><br /></font><font color="#FF8000">/**<br />*&nbsp;default&nbsp;Path&nbsp;of&nbsp;file<br />*<br />*&nbsp;@var&nbsp;string<br />*/<br /></font><font color="#007700">var&nbsp;</font><font color="#0000BB">$filePath&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#DD0000">""</font><font color="#007700">;<br /><br /></font><font color="#FF8000">/**<br />*&nbsp;contents&nbsp;of&nbsp;XML&nbsp;string&nbsp;(DO&nbsp;NOT&nbsp;EDIT!)<br />*<br />*&nbsp;@var&nbsp;NULL<br />*/<br /></font><font color="#007700">var&nbsp;</font><font color="#0000BB">$contents&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">NULL</font><font color="#007700">;<br /><br /></font><font color="#FF8000">/**<br />*&nbsp;is&nbsp;creating&nbsp;an&nbsp;XML&nbsp;string/file?&nbsp;(DO&nbsp;NOT&nbsp;EDIT!)<br />*<br />*&nbsp;@var&nbsp;bool<br />*/<br /></font><font color="#007700">var&nbsp;</font><font color="#0000BB">$creationStatus&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br /><br /></font><font color="#FF8000">#&nbsp;is&nbsp;frozen?<br />/**<br />*&nbsp;is&nbsp;frozen?&nbsp;(DO&nbsp;NOT&nbsp;EDIT!)<br />*<br />*&nbsp;@var&nbsp;bool<br />*/<br /></font><font color="#007700">var&nbsp;</font><font color="#0000BB">$freeze&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br /><br /></font><font color="#FF8000">/**<br />*&nbsp;Array&nbsp;that&nbsp;contain&nbsp;indentation&nbsp;levels&nbsp;(DO&nbsp;NOT&nbsp;EDIT!)<br />*<br />*&nbsp;@var&nbsp;int<br />*/<br /></font><font color="#007700">var&nbsp;</font><font color="#0000BB">$indentations&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">0</font><font color="#007700">;<br /><br /><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Begin&nbsp;XML&nbsp;file&nbsp;creation&nbsp;process<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;This&nbsp;function&nbsp;initializing&nbsp;the&nbsp;creation&nbsp;process&nbsp;to&nbsp;generate&nbsp;an&nbsp;XML<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;document.<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;You&nbsp;can't&nbsp;create&nbsp;two&nbsp;or&nbsp;more&nbsp;XML&nbsp;documents&nbsp;in&nbsp;the&nbsp;same&nbsp;moment.<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;you&nbsp;do&nbsp;it,&nbsp;all&nbsp;the&nbsp;processes&nbsp;will&nbsp;be&nbsp;freezed<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@author&nbsp;Giovanni&nbsp;Piller&nbsp;Cottrer&nbsp;&lt;giovanni.piller@gmail.com&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$encoding&nbsp;enconding&nbsp;type<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;bool&nbsp;$disable_direct_acess&nbsp;disable&nbsp;direct&nbsp;accessto&nbsp;file<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(extension&nbsp;must&nbsp;be&nbsp;*.php)<br />&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">function&nbsp;</font><font color="#0000BB">createXMLFile</font><font color="#007700">(</font><font color="#0000BB">$encoding&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#DD0000">"&nbsp;encoding=\"ISO-8859-1\""</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$disable_direct_acess&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">false</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font><font color="#0000BB">$encoding&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#DD0000">"&nbsp;"</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$encoding&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#DD0000">"&nbsp;encoding=\"ISO-8859-1\""</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">creationStatus&nbsp;</font><font color="#007700">AND&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">debug</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">trigger_error</font><font color="#007700">(</font><font color="#DD0000">"Cannot&nbsp;create&nbsp;two&nbsp;or&nbsp;more&nbsp;XML&nbsp;files&nbsp;in&nbsp;the&nbsp;same&nbsp;moment.&nbsp;FREEZING...&lt;br&gt;"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">creationStatus&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">freeze&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">true</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}elseif(</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">creationStatus&nbsp;</font><font color="#007700">AND&nbsp;!</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">debug</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">creationStatus&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">freeze&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">true</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">creationStatus&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">true</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">indentations&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">0</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font><font color="#0000BB">$disable_direct_acess</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">contents&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#DD0000">"&lt;?exit(1);?&gt;\n"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">contents&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#DD0000">"&lt;?xml&nbsp;version='1.0'$encoding?&gt;\n"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">true</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Add&nbsp;an&nbsp;XML&nbsp;element<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;This&nbsp;function&nbsp;add&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;the&nbsp;current&nbsp;contents.<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;To&nbsp;do&nbsp;this,&nbsp;an&nbsp;XML&nbsp;creation&nbsp;process&nbsp;must_be_started&nbsp;else,&nbsp;it&nbsp;return<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;an&nbsp;error.<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@author&nbsp;Giovanni&nbsp;Piller&nbsp;Cottrer&nbsp;&lt;giovanni.piller@gmail.com&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$element&nbsp;Xml&nbsp;element&nbsp;to&nbsp;create<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$text&nbsp;The&nbsp;text&nbsp;of&nbsp;te&nbsp;element<br />&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">function&nbsp;</font><font color="#0000BB">add_xml_element</font><font color="#007700">(</font><font color="#0000BB">$element</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$text</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">creationStatus</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">open_xml_element</font><font color="#007700">(</font><font color="#0000BB">$element</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$text</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">close_xml_element</font><font color="#007700">(</font><font color="#0000BB">$element</font><font color="#007700">,&nbsp;</font><font color="#DD0000">""</font><font color="#007700">,&nbsp;</font><font color="#0000BB">true</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}elseif(!</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">creationStatus&nbsp;</font><font color="#007700">AND&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">debug</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">trigger_error</font><font color="#007700">(</font><font color="#DD0000">"Cannot&nbsp;add&nbsp;an&nbsp;element&nbsp;to&nbsp;XML&nbsp;document.&nbsp;Creation&nbsp;process&nbsp;is&nbsp;not&nbsp;already&nbsp;started.&nbsp;FREEZING...&lt;br&gt;"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Open&nbsp;XML&nbsp;element<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;This&nbsp;function&nbsp;add&nbsp;an&nbsp;opened&nbsp;XML&nbsp;element&nbsp;to&nbsp;the&nbsp;contents<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@author&nbsp;Giovanni&nbsp;Piller&nbsp;Cottrer&nbsp;&lt;giovanni.piller@gmail.com&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$element&nbsp;element's&nbsp;name<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$text&nbsp;optional&nbsp;text&nbsp;(inside&nbsp;element)<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@see&nbsp;close_xml_element()<br />&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">function&nbsp;</font><font color="#0000BB">open_xml_element</font><font color="#007700">(</font><font color="#0000BB">$element</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$text</font><font color="#007700">=</font><font color="#DD0000">""</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">creationStatus</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">contents&nbsp;</font><font color="#007700">.=&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">__set_indentation</font><font color="#007700">(</font><font color="#DD0000">"\n&lt;"</font><font color="#007700">.</font><font color="#0000BB">$element</font><font color="#007700">.</font><font color="#DD0000">"&gt;"</font><font color="#007700">.</font><font color="#0000BB">$text</font><font color="#007700">.</font><font color="#DD0000">""</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">indentations</font><font color="#007700">++;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">true</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}elseif(!</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">creationStatus&nbsp;</font><font color="#007700">AND&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">debug</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">trigger_error</font><font color="#007700">(</font><font color="#DD0000">"Cannot&nbsp;add&nbsp;an&nbsp;element&nbsp;to&nbsp;XML&nbsp;document.&nbsp;Creation&nbsp;process&nbsp;is&nbsp;not&nbsp;already&nbsp;started.&nbsp;FREEZING...&lt;br&gt;"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Close&nbsp;an&nbsp;opened&nbsp;XML&nbsp;element<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;This&nbsp;function&nbsp;close&nbsp;and&nbsp;opened&nbsp;XML&nbsp;element<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@author&nbsp;Giovanni&nbsp;Piller&nbsp;Cottrer&nbsp;&lt;giovanni.piller@gmail.com&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$element&nbsp;element's&nbsp;name<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$text&nbsp;optional&nbsp;text&nbsp;(inside&nbsp;element)<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;bool&nbsp;$no_nl&nbsp;not&nbsp;use&nbsp;newline&nbsp;in&nbsp;this&nbsp;function<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@see&nbsp;open_xml_element()<br />&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">function&nbsp;</font><font color="#0000BB">close_xml_element</font><font color="#007700">(</font><font color="#0000BB">$element</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$text&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#DD0000">""</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$no_nl&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">false</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">#&nbsp;initializing&nbsp;flag<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$xml_flag&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">true</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">#&nbsp;add&nbsp;new&nbsp;line&nbsp;to&nbsp;$text<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">if(</font><font color="#0000BB">$text&nbsp;</font><font color="#007700">!=&nbsp;</font><font color="#DD0000">""&nbsp;</font><font color="#007700">AND&nbsp;!</font><font color="#0000BB">$no_nl</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$text&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#DD0000">"\n"</font><font color="#007700">.</font><font color="#0000BB">$text</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}elseif(</font><font color="#0000BB">$text&nbsp;</font><font color="#007700">!=&nbsp;</font><font color="#DD0000">""&nbsp;</font><font color="#007700">AND&nbsp;</font><font color="#0000BB">$no_nl</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//&nbsp;[continue]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font><font color="#0000BB">substr_count</font><font color="#007700">(</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">contents</font><font color="#007700">,&nbsp;</font><font color="#DD0000">"&lt;"</font><font color="#007700">.</font><font color="#0000BB">$element</font><font color="#007700">.</font><font color="#DD0000">"&gt;"</font><font color="#007700">)&nbsp;&gt;&nbsp;</font><font color="#0000BB">substr_count</font><font color="#007700">(</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">contents</font><font color="#007700">,&nbsp;</font><font color="#DD0000">"&lt;/"</font><font color="#007700">.</font><font color="#0000BB">$element</font><font color="#007700">.</font><font color="#DD0000">"&gt;"</font><font color="#007700">)){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//&nbsp;[continue]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">}else{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">#&nbsp;there&nbsp;aren't&nbsp;opened&nbsp;XML&nbsp;element&nbsp;like&nbsp;`$element'&nbsp;to&nbsp;close<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$xml_flag&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">creationStatus&nbsp;</font><font color="#007700">AND&nbsp;</font><font color="#0000BB">$xml_flag</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">indentations</font><font color="#007700">--;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font><font color="#0000BB">$no_nl</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">contents&nbsp;</font><font color="#007700">.=</font><font color="#0000BB">$text</font><font color="#007700">.</font><font color="#DD0000">"&lt;/"</font><font color="#007700">.</font><font color="#0000BB">$element</font><font color="#007700">.</font><font color="#DD0000">"&gt;"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">contents&nbsp;</font><font color="#007700">.=&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">__set_indentation</font><font color="#007700">(</font><font color="#0000BB">$text</font><font color="#007700">.</font><font color="#DD0000">"\n&lt;/"</font><font color="#007700">.</font><font color="#0000BB">$element</font><font color="#007700">.</font><font color="#DD0000">"&gt;"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">true</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}elseif(!</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">creationStatus&nbsp;</font><font color="#007700">AND&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">debug</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">trigger_error</font><font color="#007700">(</font><font color="#DD0000">"Cannot&nbsp;add&nbsp;an&nbsp;element&nbsp;to&nbsp;XML&nbsp;document.&nbsp;Creation&nbsp;process&nbsp;is&nbsp;not&nbsp;already&nbsp;started.&nbsp;FREEZING...&lt;br&gt;"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Add&nbsp;a&nbsp;comment<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Add&nbsp;a&nbsp;comment&nbsp;to&nbsp;current&nbsp;$contents&nbsp;class&nbsp;var<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@author&nbsp;Giovanni&nbsp;Piller&nbsp;Cottrer&nbsp;&lt;giovanni.piller@gmail.com&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$text&nbsp;text&nbsp;to&nbsp;comment<br />&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">function&nbsp;</font><font color="#0000BB">add_comment</font><font color="#007700">(</font><font color="#0000BB">$text</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">creationStatus</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">contents&nbsp;</font><font color="#007700">.=&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">__set_indentation</font><font color="#007700">(</font><font color="#DD0000">"\n&lt;!--&nbsp;"</font><font color="#007700">.</font><font color="#0000BB">$text</font><font color="#007700">.</font><font color="#DD0000">"&nbsp;--&gt;\n"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}elseif(!</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">creationStatus&nbsp;</font><font color="#007700">AND&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">debug</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">trigger_error</font><font color="#007700">(</font><font color="#DD0000">"Cannot&nbsp;add&nbsp;a&nbsp;comment&nbsp;to&nbsp;XML&nbsp;document.&nbsp;Creation&nbsp;process&nbsp;is&nbsp;not&nbsp;already&nbsp;started.&nbsp;FREEZING...&lt;br&gt;"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Add&nbsp;$repeat&nbsp;newline<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Add&nbsp;n&nbsp;new&nbsp;line&nbsp;as&nbsp;$repeat&nbsp;variable<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@author&nbsp;Giovanni&nbsp;Piller&nbsp;Cottrer&nbsp;&lt;giovanni.piller@gmail.com&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$repeat&nbsp;nÂ°&nbsp;of&nbsp;newline&nbsp;output<br />&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">function&nbsp;</font><font color="#0000BB">add_nl</font><font color="#007700">(</font><font color="#0000BB">$repeat&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">1</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">creationStatus&nbsp;</font><font color="#007700">AND&nbsp;</font><font color="#0000BB">$xml_flag</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">contents&nbsp;</font><font color="#007700">.=&nbsp;</font><font color="#0000BB">str_repeat</font><font color="#007700">(</font><font color="#DD0000">"\n"</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$repeat</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}elseif(!</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">creationStatus&nbsp;</font><font color="#007700">AND&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">debug</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">trigger_error</font><font color="#007700">(</font><font color="#DD0000">"Cannot&nbsp;"</font><font color="#007700">.</font><font color="#0000BB">$repeat</font><font color="#007700">.</font><font color="#DD0000">"&nbsp;new&nbsp;line&nbsp;to&nbsp;XML&nbsp;document.&nbsp;Creation&nbsp;process&nbsp;is&nbsp;not&nbsp;already&nbsp;started.&nbsp;FREEZING...&lt;br&gt;"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Set&nbsp;the&nbsp;location&nbsp;of&nbsp;the&nbsp;file<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Set&nbsp;'filePath'&nbsp;class&nbsp;variabile&nbsp;with&nbsp;the&nbsp;path&nbsp;of&nbsp;the&nbsp;new&nbsp;XML&nbsp;file<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@author&nbsp;Giovanni&nbsp;Piller&nbsp;Cottrer&nbsp;&lt;giovanni.piller@gmail.com&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;File&nbsp;path<br />&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">function&nbsp;</font><font color="#0000BB">setPath</font><font color="#007700">(</font><font color="#0000BB">$path</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">filePath&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">$path</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">true</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Set&nbsp;the&nbsp;overwrite&nbsp;permissions<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;question&nbsp;is:&nbsp;can&nbsp;you&nbsp;overwrite&nbsp;an&nbsp;existent&nbsp;file?&nbsp;:D<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@author&nbsp;Giovanni&nbsp;Piller&nbsp;Cottrer&nbsp;&lt;giovanni.piller@gmail.com&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;bool<br />&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">function&nbsp;</font><font color="#0000BB">setOverWrite</font><font color="#007700">(</font><font color="#0000BB">$reply</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!</font><font color="#0000BB">is_bool</font><font color="#007700">(</font><font color="#0000BB">$reply</font><font color="#007700">)){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$reply&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">overWrite&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">$reply</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">true</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Reset&nbsp;all<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Reset&nbsp;all&nbsp;class&nbsp;variabiles&nbsp;and&nbsp;delete&nbsp;all&nbsp;current&nbsp;processes<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@author&nbsp;Giovanni&nbsp;Piller&nbsp;Cottrer&nbsp;&lt;giovanni.piller@gmail.com&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">function&nbsp;</font><font color="#0000BB">killallProcess</font><font color="#007700">(){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">filePath&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#DD0000">""</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">contents&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#DD0000">""</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">creationStatus&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">freeze&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Set&nbsp;indentation&nbsp;of&nbsp;XML&nbsp;elements<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;This&nbsp;function&nbsp;is&nbsp;used&nbsp;in&nbsp;all&nbsp;the&nbsp;part&nbsp;of&nbsp;code&nbsp;where&nbsp;is&nbsp;created&nbsp;an&nbsp;XML<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;element.&nbsp;This&nbsp;provide&nbsp;a&nbsp;level&nbsp;indentations&nbsp;on&nbsp;the&nbsp;current&nbsp;element.<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@author&nbsp;Giovanni&nbsp;Piller&nbsp;Cottrer&nbsp;&lt;giovanni.piller@gmail.com&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$text&nbsp;XML&nbsp;element&nbsp;text&nbsp;with&nbsp;tags<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@see&nbsp;*_xml_element()&nbsp;(only&nbsp;functions&nbsp;that&nbsp;make&nbsp;XML&nbsp;elements!)<br />&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">function&nbsp;</font><font color="#0000BB">__set_indentation</font><font color="#007700">(</font><font color="#0000BB">$text</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$return&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">str_repeat</font><font color="#007700">(</font><font color="#DD0000">"&nbsp;"</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">indentations</font><font color="#007700">).</font><font color="#0000BB">$text</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font><font color="#0000BB">substr_count</font><font color="#007700">(</font><font color="#0000BB">$text</font><font color="#007700">,&nbsp;</font><font color="#DD0000">"\n"</font><font color="#007700">)&nbsp;&gt;&nbsp;</font><font color="#0000BB">0</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$return&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">str_replace</font><font color="#007700">(</font><font color="#DD0000">"\n"</font><font color="#007700">,&nbsp;</font><font color="#DD0000">"\n"</font><font color="#007700">.</font><font color="#0000BB">str_repeat</font><font color="#007700">(</font><font color="#DD0000">"&nbsp;"</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">indentations</font><font color="#007700">),&nbsp;</font><font color="#0000BB">$text</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">$return</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Create&nbsp;XML&nbsp;file<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;This&nbsp;function&nbsp;write&nbsp;to&nbsp;the&nbsp;xml&nbsp;file&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;class&nbsp;variabile<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;'contents'&nbsp;but&nbsp;only&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;process&nbsp;active<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@author&nbsp;Giovanni&nbsp;Piller&nbsp;Cottrer&nbsp;&lt;giovanni.piller@gmail.com&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@access&nbsp;private<br />&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">function&nbsp;</font><font color="#0000BB">__makeFile</font><font color="#007700">(){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font><font color="#0000BB">$fp&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">fopen</font><font color="#007700">(</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">filePath</font><font color="#007700">,&nbsp;</font><font color="#DD0000">"w+"</font><font color="#007700">)){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">fputs</font><font color="#007700">(</font><font color="#0000BB">$fp</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">contents</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">fclose</font><font color="#007700">(</font><font color="#0000BB">$fp</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">true</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}elseif(</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">debug</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">trigger_error</font><font color="#007700">(</font><font color="#DD0000">"Cannot&nbsp;create&nbsp;XML&nbsp;file&nbsp;in&nbsp;`"</font><font color="#007700">.</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">filePath</font><font color="#007700">.</font><font color="#DD0000">"'.&nbsp;FREEZING...&lt;br&gt;"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">freeze&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">true</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">freeze&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">true</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Complete&nbsp;creation&nbsp;process<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Complete&nbsp;creation&nbsp;process&nbsp;and&nbsp;reset&nbsp;all&nbsp;class&nbsp;veriabiles&nbsp;used.<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*@author&nbsp;Giovanni&nbsp;Piller&nbsp;Cottrer&nbsp;&lt;giovanni.piller@gmail.com&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">function&nbsp;</font><font color="#0000BB">closeXMLFile</font><font color="#007700">(){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">filePath&nbsp;</font><font color="#007700">==&nbsp;</font><font color="#DD0000">""&nbsp;</font><font color="#007700">AND&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">debug</font><font color="#007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">trigger_error</font><font color="#007700">(</font><font color="#DD0000">"You&nbsp;&lt;strong&gt;must&lt;/strong&gt;&nbsp;run&nbsp;`&lt;i&gt;setPath(&nbsp;string&nbsp;PATH&nbsp;)&lt;/i&gt;'&nbsp;function&nbsp;before&nbsp;close&nbsp;the&nbsp;creation&nbsp;process.&nbsp;FREEZING...&lt;br&gt;"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">freeze&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">true</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}elseif(</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">filePath&nbsp;</font><font color="#007700">==&nbsp;</font><font color="#DD0000">""&nbsp;</font><font color="#007700">AND&nbsp;!</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">debug</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">freeze&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">true</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//&nbsp;[continue]&nbsp;//<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">creationStatus&nbsp;</font><font color="#007700">AND&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">debug</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">trigger_error</font><font color="#007700">(</font><font color="#DD0000">"You&nbsp;must&nbsp;begin&nbsp;a&nbsp;cration&nbsp;status."</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}elseif(!</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">creationStatus&nbsp;</font><font color="#007700">AND&nbsp;!</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">debug</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}elseif(</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">creationStatus</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font><font color="#0000BB">file_exists</font><font color="#007700">(</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">filePath</font><font color="#007700">)&nbsp;AND&nbsp;!</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">overWrite&nbsp;</font><font color="#007700">AND&nbsp;!</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">debug</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">freeze&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">true</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}elseif(</font><font color="#0000BB">file_exists</font><font color="#007700">(</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">filePath</font><font color="#007700">)&nbsp;AND&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">overWrite</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}elseif(</font><font color="#0000BB">file_exists</font><font color="#007700">(</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">filePath</font><font color="#007700">)&nbsp;AND&nbsp;!</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">overWrite&nbsp;</font><font color="#007700">AND&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">debug</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">trigger_error</font><font color="#007700">(</font><font color="#DD0000">"File&nbsp;already&nbsp;exists,&nbsp;you&nbsp;cannot&nbsp;overwrite&nbsp;it.&nbsp;Use&nbsp;`setOverWrite(&nbsp;bool&nbsp;)'&nbsp;function&nbsp;to&nbsp;set&nbsp;it&nbsp;permission&nbsp;temporanely.&nbsp;FREEZING...&lt;br&gt;"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">freeze&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">true</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">freeze</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">__makeFile</font><font color="#007700">()){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#DD0000">"CREATION&nbsp;PROCESS&nbsp;succesfully&nbsp;completed!!!&lt;br&gt;\n"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">killallProcess</font><font color="#007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">true</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}elseif(</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">freeze&nbsp;</font><font color="#007700">AND&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">debug</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">trigger_error</font><font color="#007700">(</font><font color="#DD0000">"You&nbsp;cannot&nbsp;close&nbsp;XML&nbsp;file&nbsp;while&nbsp;the&nbsp;status&nbsp;is&nbsp;freeze."</font><font color="#007700">,&nbsp;</font><font color="#0000BB">E_USER_ERROR</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}elseif(</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">freeze&nbsp;</font><font color="#007700">AND&nbsp;!</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">debug</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Verify&nbsp;if&nbsp;XML&nbsp;element&nbsp;exists<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;This&nbsp;is&nbsp;a&nbsp;very&nbsp;useful&nbsp;function&nbsp;that&nbsp;permti&nbsp;you&nbsp;to&nbsp;verify&nbsp;if&nbsp;an&nbsp;XML<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;element&nbsp;exists.<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@author&nbsp;Giovanni&nbsp;Piller&nbsp;Cottrer&nbsp;&lt;giovanni.piller@gmail.com&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$element&nbsp;The&nbsp;element&nbsp;to&nbsp;verify<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$source&nbsp;XML&nbsp;source<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;bool<br />&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">function&nbsp;</font><font color="#0000BB">xml_element_exists</font><font color="#007700">(</font><font color="#0000BB">$element</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$source</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font><font color="#0000BB">substr_count</font><font color="#007700">(</font><font color="#0000BB">$source</font><font color="#007700">,&nbsp;</font><font color="#DD0000">"&lt;"</font><font color="#007700">.</font><font color="#0000BB">$element</font><font color="#007700">.</font><font color="#DD0000">"&gt;"</font><font color="#007700">)&nbsp;&gt;&nbsp;</font><font color="#0000BB">0</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">true</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Semi-Automatize&nbsp;XML&nbsp;creation&nbsp;process<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;This&nbsp;function&nbsp;can&nbsp;automatize&nbsp;the&nbsp;creation&nbsp;of&nbsp;an&nbsp;XML&nbsp;fle&nbsp;using&nbsp;the<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;names&nbsp;and&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;inputs.&nbsp;This&nbsp;function&nbsp;became&nbsp;very&nbsp;useful<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;when&nbsp;there&nbsp;are&nbsp;multiples&nbsp;input&nbsp;to&nbsp;inflate&nbsp;in&nbsp;a&nbsp;XML&nbsp;file.<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;You&nbsp;can&nbsp;ignore&nbsp;items&nbsp;putting&nbsp;the&nbsp;attribute&nbsp;'__nn_'&nbsp;first&nbsp;of&nbsp;the&nbsp;rest<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;of&nbsp;the&nbsp;name.<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;All&nbsp;'__ob_'&nbsp;strings&nbsp;are&nbsp;removed&nbsp;from&nbsp;the&nbsp;item&nbsp;name.<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;you&nbsp;use&nbsp;the&nbsp;third&nbsp;parameter,&nbsp;we&nbsp;will&nbsp;indent&nbsp;all&nbsp;the&nbsp;other&nbsp;elements<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;with&nbsp;a&nbsp;whitespace&nbsp;to&nbsp;identify&nbsp;that&nbsp;elements&nbsp;block&nbsp;quikly.<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@author&nbsp;Giovanni&nbsp;Piller&nbsp;Cottrer&nbsp;&lt;giovanni.piller@gmail.com&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$file&nbsp;The&nbsp;location&nbsp;where&nbsp;the&nbsp;file&nbsp;will&nbsp;be&nbsp;created<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;$array&nbsp;a&nbsp;superglobal&nbsp;array&nbsp;(usually&nbsp;$_POST)<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$upperElement&nbsp;an&nbsp;optional&nbsp;main&nbsp;element<br />&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">function&nbsp;</font><font color="#0000BB">autopilot</font><font color="#007700">(</font><font color="#0000BB">$file</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$array</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$by&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#DD0000">""</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$upperElement&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#DD0000">""</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">#&nbsp;starting&nbsp;autoprocessing&nbsp;pilot<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">createXMLFile</font><font color="#007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">#&nbsp;set&nbsp;path<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">setPath</font><font color="#007700">(</font><font color="#0000BB">$file</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font><font color="#0000BB">$upperElement&nbsp;</font><font color="#007700">!=&nbsp;</font><font color="#DD0000">""</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">open_xml_element</font><font color="#007700">(</font><font color="#0000BB">$upperElement</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">#&nbsp;verify&nbsp;if&nbsp;the&nbsp;posted&nbsp;data&nbsp;is&nbsp;correctly&nbsp;sended<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">while(list(</font><font color="#0000BB">$key</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$value</font><font color="#007700">)&nbsp;=&nbsp;</font><font color="#0000BB">each</font><font color="#007700">(</font><font color="#0000BB">$array</font><font color="#007700">)){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">#&nbsp;initializing&nbsp;flag<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$flag_two&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font><font color="#0000BB">substr</font><font color="#007700">(</font><font color="#0000BB">$key</font><font color="#007700">,&nbsp;</font><font color="#0000BB">0</font><font color="#007700">,&nbsp;</font><font color="#0000BB">5</font><font color="#007700">)&nbsp;==&nbsp;</font><font color="#DD0000">"__ob_"</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">#&nbsp;delete&nbsp;the&nbsp;string&nbsp;'__ob_'<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$xml_name&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">eregi_replace</font><font color="#007700">(</font><font color="#DD0000">"__ob_"</font><font color="#007700">,&nbsp;</font><font color="#DD0000">""</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$key</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}elseif(</font><font color="#0000BB">substr</font><font color="#007700">(</font><font color="#0000BB">$key</font><font color="#007700">,&nbsp;</font><font color="#0000BB">0</font><font color="#007700">,&nbsp;</font><font color="#0000BB">5</font><font color="#007700">)&nbsp;==&nbsp;</font><font color="#DD0000">"__nn_"&nbsp;</font><font color="#007700">OR&nbsp;</font><font color="#0000BB">substr</font><font color="#007700">(</font><font color="#0000BB">$key</font><font color="#007700">,&nbsp;</font><font color="#0000BB">0</font><font color="#007700">,&nbsp;</font><font color="#0000BB">6</font><font color="#007700">)&nbsp;==&nbsp;</font><font color="#DD0000">"submit"</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">#&nbsp;setting&nbsp;up&nbsp;flag_two<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$flag_two&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">true</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">#&nbsp;set&nbsp;$xml_name&nbsp;as&nbsp;key<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$xml_name&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">$key</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">#&nbsp;if&nbsp;the&nbsp;"flag&nbsp;man"&nbsp;say&nbsp;'false'&nbsp;we&nbsp;can&nbsp;continue<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">if(!</font><font color="#0000BB">$flag_two</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font><font color="#0000BB">$upperElement&nbsp;</font><font color="#007700">!=&nbsp;</font><font color="#DD0000">""</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">#&nbsp;add&nbsp;a&nbsp;whitespace&nbsp;for&nbsp;indentation<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">contents&nbsp;</font><font color="#007700">.=&nbsp;</font><font color="#DD0000">"&nbsp;"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">#&nbsp;add&nbsp;xml&nbsp;element&nbsp;as&nbsp;$key<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">add_xml_element</font><font color="#007700">(</font><font color="#0000BB">$xml_name</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$value</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font><font color="#0000BB">$by&nbsp;</font><font color="#007700">!=&nbsp;</font><font color="#DD0000">""</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">#&nbsp;add&nbsp;xml&nbsp;element&nbsp;as&nbsp;$key<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">add_xml_element</font><font color="#007700">(</font><font color="#DD0000">"by"</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$by</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font><font color="#0000BB">$upperElement&nbsp;</font><font color="#007700">!=&nbsp;</font><font color="#DD0000">""</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">close_xml_element</font><font color="#007700">(</font><font color="#0000BB">$upperElement</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">#&nbsp;complete&nbsp;XML&nbsp;creation&nbsp;process<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">closeXMLFile</font><font color="#007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Get&nbsp;the&nbsp;first&nbsp;XML&nbsp;element&nbsp;founded<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;This&nbsp;function&nbsp;will&nbsp;return&nbsp;you&nbsp;the&nbsp;content&nbsp;of&nbsp;the&nbsp;first&nbsp;XML&nbsp;element.<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@author&nbsp;Simone&nbsp;Vellei&nbsp;&lt;simone_vellei@users.sourceforge.net&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$element&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;element<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$text&nbsp;the&nbsp;XML&nbsp;string<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@see&nbsp;get_xml_array(),&nbsp;get_xml_file()<br />&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">function&nbsp;</font><font color="#0000BB">get_xml_element</font><font color="#007700">(</font><font color="#0000BB">$element</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$text</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$buff&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">ereg_replace</font><font color="#007700">(</font><font color="#DD0000">".*&lt;"</font><font color="#007700">.</font><font color="#0000BB">$element</font><font color="#007700">.</font><font color="#DD0000">"&gt;"</font><font color="#007700">,</font><font color="#DD0000">""</font><font color="#007700">,</font><font color="#0000BB">$text</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$buff&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">ereg_replace</font><font color="#007700">(</font><font color="#DD0000">"&lt;/"</font><font color="#007700">.</font><font color="#0000BB">$element</font><font color="#007700">.</font><font color="#DD0000">"&gt;.*"</font><font color="#007700">,</font><font color="#DD0000">""</font><font color="#007700">,</font><font color="#0000BB">$buff</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">$buff</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Get&nbsp;the&nbsp;arry&nbsp;of&nbsp;all&nbsp;element&nbsp;selected<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;This&nbsp;function&nbsp;get&nbsp;an&nbsp;array&nbsp;from&nbsp;the&nbsp;list&nbsp;of&nbsp;all&nbsp;the&nbsp;elements&nbsp;called&nbsp;as<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;$element&nbsp;variable<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@author&nbsp;Simone&nbsp;Vellei&nbsp;&lt;simone_vellei@users.sourceforge.net&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$element&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;elements<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$text&nbsp;the&nbsp;XML&nbsp;string<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@see&nbsp;get_xml_element(),&nbsp;get_xml_file()<br />&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">function&nbsp;</font><font color="#0000BB">get_xml_array</font><font color="#007700">(</font><font color="#0000BB">$element</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$text</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$buff&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">explode</font><font color="#007700">(</font><font color="#DD0000">"&lt;/"</font><font color="#007700">.</font><font color="#0000BB">$element</font><font color="#007700">.</font><font color="#DD0000">"&gt;"</font><font color="#007700">,</font><font color="#0000BB">$text</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">array_splice&nbsp;</font><font color="#007700">(</font><font color="#0000BB">$buff</font><font color="#007700">,&nbsp;</font><font color="#0000BB">count</font><font color="#007700">(</font><font color="#0000BB">$buff</font><font color="#007700">)-</font><font color="#0000BB">1</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">$buff</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Get&nbsp;an&nbsp;XML&nbsp;file<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;This&nbsp;function&nbsp;return&nbsp;the&nbsp;text&nbsp;contained&nbsp;in&nbsp;a&nbsp;XML&nbsp;file.<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@author&nbsp;Giovanni&nbsp;Piller&nbsp;Cottrer&nbsp;&lt;giovanni.piller@gmail.com&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$element&nbsp;file&nbsp;path<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;bool&nbsp;$text&nbsp;set&nbsp;it&nbsp;to&nbsp;false&nbsp;to&nbsp;get&nbsp;text_and_comments<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@see&nbsp;get_xml_array(),&nbsp;get_xml_element(),&nbsp;get_file()<br />&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">function&nbsp;</font><font color="#0000BB">get_xml_file</font><font color="#007700">(</font><font color="#0000BB">$file</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$comments&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">true</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!</font><font color="#0000BB">file_exists</font><font color="#007700">(</font><font color="#0000BB">$file</font><font color="#007700">)){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">trigger_error</font><font color="#007700">(</font><font color="#DD0000">"Non&nbsp;riesco&nbsp;a&nbsp;trovare&nbsp;il&nbsp;file&nbsp;$file"</font><font color="#007700">,&nbsp;</font><font color="#0000BB">E_USER_ERROR</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">#&nbsp;get&nbsp;the&nbsp;file&nbsp;contents&nbsp;excluding&nbsp;PHP&nbsp;execution<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$contents&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">implode</font><font color="#007700">(</font><font color="#DD0000">""</font><font color="#007700">,&nbsp;</font><font color="#0000BB">file</font><font color="#007700">(</font><font color="#0000BB">$file</font><font color="#007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">#&nbsp;delete&nbsp;all&nbsp;comments<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">if(</font><font color="#0000BB">$comments</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$contents&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">eregi_replace</font><font color="#007700">(</font><font color="#DD0000">"&lt;!-&nbsp;*&nbsp;-&gt;"</font><font color="#007700">,&nbsp;</font><font color="#DD0000">""</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$contents</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">#&nbsp;return&nbsp;contents<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">return&nbsp;</font><font color="#0000BB">$contents</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Get&nbsp;file&nbsp;contents<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;This&nbsp;function&nbsp;can&nbsp;return&nbsp;you&nbsp;the&nbsp;contents&nbsp;of&nbsp;a&nbsp;file<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@author&nbsp;Simone&nbsp;Vellei&nbsp;&lt;simone_vellei@users.sourceforge.net&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$filename&nbsp;path&nbsp;of&nbsp;the&nbsp;file<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@see&nbsp;get_xml_file()<br />&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">function&nbsp;</font><font color="#0000BB">get_file</font><font color="#007700">(</font><font color="#0000BB">$filename</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$fd&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">fopen&nbsp;</font><font color="#007700">(</font><font color="#DD0000">"$filename"</font><font color="#007700">,&nbsp;</font><font color="#DD0000">"r"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font><font color="#0000BB">$fd</font><font color="#007700">==</font><font color="#DD0000">""</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die(</font><font color="#0000BB">_NONPUOI</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(!</font><font color="#0000BB">feof&nbsp;</font><font color="#007700">(</font><font color="#0000BB">$fd</font><font color="#007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$buffer&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">fgets</font><font color="#007700">(</font><font color="#0000BB">$fd</font><font color="#007700">,&nbsp;</font><font color="#0000BB">4096</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$string</font><font color="#007700">.=</font><font color="#0000BB">$buffer</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">fclose&nbsp;</font><font color="#007700">(</font><font color="#0000BB">$fd</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">$string</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Auto-Generate&nbsp;an&nbsp;RSS&nbsp;file&nbsp;&lt;<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@author&nbsp;basic&nbsp;source&nbsp;by&nbsp;Marco&nbsp;Segato&nbsp;&lt;segatom@yahoo.it&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@author&nbsp;Giovanni&nbsp;Piller&nbsp;Cottrer&nbsp;&lt;giovanni.piller@gmail.com&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$id&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">function&nbsp;</font><font color="#0000BB">project2RSS</font><font color="#007700">(</font><font color="#0000BB">$id</font><font color="#007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;global&nbsp;</font><font color="#0000BB">$sitename</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$siteurl</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$newspp</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$admin_mail</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//&nbsp;tag&nbsp;apertura&nbsp;del&nbsp;feed<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">createXMLFile</font><font color="#007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$body&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#DD0000">"&lt;?xml&nbsp;version=\"1.0\"&nbsp;encoding=\"ISO-8859-1\"?&gt;\n&lt;rss&nbsp;version=\"2.0\"&gt;\n\t&lt;channel&gt;\n"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">#&nbsp;general&nbsp;informations<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$body&nbsp;</font><font color="#007700">.=&nbsp;</font><font color="#DD0000">"\t\t&lt;title&gt;$sitename&lt;/title&gt;\n\t\t&lt;link&gt;$siteurl&lt;/link&gt;\n\t\t&lt;description&gt;&lt;![CDATA[\"$sitename\"&nbsp;HEADLINES]]&gt;&lt;/description&gt;\n"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$body&nbsp;</font><font color="#007700">.=&nbsp;</font><font color="#DD0000">"\t\t&lt;managingEditor&gt;$admin_mail&lt;/managingEditor&gt;\n\t\t&lt;generator&gt;Groupware&nbsp;RSS&nbsp;generator&nbsp;-&nbsp;XML&nbsp;class&nbsp;1.0&nbsp;by&nbsp;Gigasoft&lt;/generator&gt;\n"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$body&nbsp;</font><font color="#007700">.=&nbsp;</font><font color="#DD0000">"\t\t&lt;lastBuildDate&gt;"</font><font color="#007700">.</font><font color="#0000BB">date</font><font color="#007700">(</font><font color="#DD0000">"D,&nbsp;d&nbsp;M&nbsp;Y&nbsp;H:i:s"</font><font color="#007700">,</font><font color="#0000BB">time</font><font color="#007700">()).</font><font color="#DD0000">"&nbsp;GMT&lt;/lastBuildDate&gt;\n"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">#&nbsp;load&nbsp;news&nbsp;sorted&nbsp;by&nbsp;data<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$handle&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">opendir</font><font color="#007700">(</font><font color="#0000BB">$id</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$modlist&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#DD0000">""</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(</font><font color="#0000BB">$file&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">readdir</font><font color="#007700">(</font><font color="#0000BB">$handle</font><font color="#007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!(&nbsp;</font><font color="#0000BB">$file</font><font color="#007700">==</font><font color="#DD0000">"."&nbsp;</font><font color="#007700">or&nbsp;</font><font color="#0000BB">$file</font><font color="#007700">==</font><font color="#DD0000">".."</font><font color="#007700">)&nbsp;and&nbsp;(!</font><font color="#0000BB">ereg</font><font color="#007700">(</font><font color="#DD0000">"^\."</font><font color="#007700">,</font><font color="#0000BB">$file</font><font color="#007700">)&nbsp;and&nbsp;(</font><font color="#0000BB">$file</font><font color="#007700">!=</font><font color="#DD0000">"CVS"</font><font color="#007700">)))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$modlist&nbsp;</font><font color="#007700">.=&nbsp;</font><font color="#DD0000">"$file&nbsp;"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">closedir</font><font color="#007700">(</font><font color="#0000BB">$handle</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$modlist&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">explode</font><font color="#007700">(</font><font color="#DD0000">"&nbsp;"</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$modlist</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">rsort</font><font color="#007700">(</font><font color="#0000BB">$modlist</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">#&nbsp;create&nbsp;a&nbsp;Tag&nbsp;for&nbsp;every&nbsp;news<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">for&nbsp;(</font><font color="#0000BB">$i</font><font color="#007700">=</font><font color="#0000BB">0</font><font color="#007700">;&nbsp;</font><font color="#0000BB">$i&nbsp;</font><font color="#007700">&lt;&nbsp;</font><font color="#0000BB">sizeof</font><font color="#007700">(</font><font color="#0000BB">$modlist</font><font color="#007700">)-</font><font color="#0000BB">1</font><font color="#007700">;&nbsp;</font><font color="#0000BB">$i</font><font color="#007700">++)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</font><font color="#0000BB">$i</font><font color="#007700">&gt;=</font><font color="#0000BB">$newspp</font><font color="#007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$string&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">get_file</font><font color="#007700">(</font><font color="#DD0000">"news/$modlist[$i]"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$mytitle&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">get_xml_element</font><font color="#007700">(</font><font color="#DD0000">"fn:title"</font><font color="#007700">,</font><font color="#0000BB">$string</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$mydesc&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">str_replace</font><font color="#007700">(</font><font color="#DD0000">"&lt;br&gt;"</font><font color="#007700">,</font><font color="#DD0000">"&lt;br&nbsp;/&gt;"</font><font color="#007700">,</font><font color="#0000BB">get_xml_element</font><font color="#007700">(</font><font color="#DD0000">"fn:header"</font><font color="#007700">,</font><font color="#0000BB">$string</font><font color="#007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$id&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">str_replace</font><font color="#007700">(</font><font color="#DD0000">".xml"</font><font color="#007700">,</font><font color="#DD0000">""</font><font color="#007700">,</font><font color="#0000BB">$modlist</font><font color="#007700">[</font><font color="#0000BB">$i</font><font color="#007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$body&nbsp;</font><font color="#007700">.=&nbsp;</font><font color="#DD0000">"\t\t&lt;item&gt;\n"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$body&nbsp;</font><font color="#007700">.=&nbsp;</font><font color="#DD0000">"\t\t\t&lt;title&gt;$mytitle&lt;/title&gt;\n"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$body&nbsp;</font><font color="#007700">.=&nbsp;</font><font color="#DD0000">"\t\t\t&lt;link&gt;$siteurl/index.php?mod=read&amp;amp;id=$id&lt;/link&gt;\n\t\t\t&lt;description&gt;&lt;![CDATA[$mydesc]]&gt;&lt;/description&gt;\n"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$body&nbsp;</font><font color="#007700">.=&nbsp;</font><font color="#DD0000">"\t\t\t&lt;pubDate&gt;"</font><font color="#007700">.</font><font color="#0000BB">date</font><font color="#007700">(</font><font color="#DD0000">"D,&nbsp;d&nbsp;M&nbsp;Y&nbsp;H:i:s"</font><font color="#007700">,</font><font color="#0000BB">$id</font><font color="#007700">).</font><font color="#DD0000">"&nbsp;GMT&lt;/pubDate&gt;\n"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$body&nbsp;</font><font color="#007700">.=&nbsp;</font><font color="#DD0000">"\t\t&lt;/item&gt;\n"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">#&nbsp;last&nbsp;tag<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$body</font><font color="#007700">.=</font><font color="#DD0000">"\t&lt;/channel&gt;\n&lt;/rss&gt;"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">#&nbsp;return&nbsp;Feed&nbsp;RSS<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">return&nbsp;</font><font color="#0000BB">$body</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />}<br /><br /></font><font color="#0000BB">?&gt;</font>
</font>
</code>